{"version":3,"sources":["../../es6/engine/utils.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;AAYA,SAAS,SAAT,CAAmB,CAAnB,EAAsB;AACpB,MAAI,OAAO,CAAP,CAAJ,CADoB;AAEpB,SAAO,IAAI,CAAJ,GAAQ,KAAK,IAAL,CAAU,CAAV,CAAR,GAAuB,KAAK,KAAL,CAAW,CAAX,CAAvB,CAFa;CAAtB;;AAKA,SAAS,MAAT,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB;AACpB,SAAO,IAAI,KAAK,KAAL,CAAW,IAAE,CAAF,CAAX,GAAgB,CAAhB,CADS;CAAtB;;AAIA,SAAS,QAAT,CAAkB,CAAlB,EAAqB;AACnB,SAAO,OAAO,UAAU,CAAV,CAAP,EAAqB,KAAK,GAAL,CAAS,CAAT,EAAY,EAAZ,CAArB,CAAP,CADmB;CAArB;;AAIA,SAAS,OAAT,CAAiB,CAAjB,EAAoB;AAClB,MAAI,SAAS,SAAS,CAAT,CAAT,CADc;;AAGlB,MAAI,UAAU,KAAK,GAAL,CAAS,CAAT,EAAY,EAAZ,CAAV,EAA2B;AAC7B,WAAO,SAAS,KAAK,GAAL,CAAS,CAAT,EAAY,EAAZ,CAAT,CADsB;GAA/B,MAEO;AACL,WAAO,MAAP,CADK;GAFP;CAHF;;AAUA,SAAS,IAAT,CAAc,iBAAd,EAAiC,kBAAjC,eAAmE;AACjE,MAAI,IAAI,CAAJ,CAD6D;;;;;;;AAGjE,yBAAc,6BAAd,oGAAmB;UAAV,gBAAU;;AACjB,UAAI,QAAS,QAAQ,KAAK,CAAL,CAAR,GAAkB,EAAE,UAAF,CAAa,CAAb,CAAlB,CAAb,CADiB;KAAnB;;;;;;;;;;;;;;GAHiE;;AAOjE,SAAO,QAAS,IAAI,IAAJ,CAAhB,CAPiE;CAAnE;;AAUA,SAAS,MAAT,CAAgB,iBAAhB,EAAmC,kBAAnC,eAAqE;AACnE,SAAO,KAAK,GAAL,CAAS,KAAK,GAAL,EAAU,IAAV,IAAkB,GAAlB,CAAT,GAAkC,CAAlC,CAD4D;CAArE;;AAIA,OAAO,OAAP,GAAiB;AACf,YADe;AAEf,gBAFe;CAAjB","file":"utils.js","sourcesContent":["'use strict';\n\n//\n// JAVA reference implementation for the hashing function.\n//\n// int h = 0;\n// for (int i = 0; i < key.length(); i++) {\n//     h = 31 * h + key.charAt(i);\n// }\n// return h ^ seed; // XOR the hash and seed\n//\n\nfunction ToInteger(x) {\n  x = Number(x);\n  return x < 0 ? Math.ceil(x) : Math.floor(x);\n}\n\nfunction modulo(a, b) {\n  return a - Math.floor(a/b)*b;\n}\n\nfunction ToUint32(x) {\n  return modulo(ToInteger(x), Math.pow(2, 32));\n}\n\nfunction ToInt32(x) {\n  let uint32 = ToUint32(x);\n\n  if (uint32 >= Math.pow(2, 31)) {\n    return uint32 - Math.pow(2, 32)\n  } else {\n    return uint32;\n  }\n}\n\nfunction hash(str /*: string */, seed /*: number */) /*: number */ {\n  let h = 0;\n\n  for (let c of str) {\n    h = ToInt32( ToInt32(31 * h) + c.charCodeAt(0) );\n  }\n\n  return ToInt32( h ^ seed );\n}\n\nfunction bucket(str /*: string */, seed /*: number */) /*: number */ {\n  return Math.abs(hash(str, seed) % 100) + 1;\n}\n\nmodule.exports = {\n  hash,\n  bucket\n};\n"]}